# 8.5 안전 모드
 PHP의 safe_mode 지시문은 8장에서 언급된 고려사항들 중에 몇 가지를 해결하기 위한 것입니다. 하지만 PHP 수준에서 이런 유형의 문제를 해결하는 것은 PHP 설명서에도 기술된 것처럼 아키텍처 관점에서는 잘못되었습니다. 해당 지시문은 다른 프로그래밍 언어로 작성된 스크립트에는 영향을 미치지 않기 때문에 사용을 추천하지는 않습니다. 
 또, 중요한 문제점은 웹 서버가 소유한 파일에 대한 액세스에 대해서는 영향을 주지 않습니다. 스크립트로 다른 스크립트를 작성하고 새롭게 작성된 스크립트는 웹 서버가 소유권을 갖습니다. 쉽게 말해 웹 서버가 소유한 다른 파일에 대해서도 액세스가 가능해집니다.
 ```
 <?php
    $filename = 'file.php';
    $script = '<?php
                    header(\'Content-Type: text/plain\');
                    readfile($_GET[\'file\']);
                ?>';
    file_put_contents($filename, $script);
?>
 ```

위 소스처럼 웹 서버가 이렇게 파일을 생성하게 되면 해당 파일 소유는 웹 서버가 됩니다. 이러한 방법으로 안전 모드가 제공하는 다양한 보호 수단들을 우회할 수가 있습니다. 뿐만 아니라 안전 모드를 사용 중이더라도, 공격자는 /tmp에 저장된 세션 데이터 같은 것들을 볼 수 있습니다. /tmp에 저장된 세션 데이터도 웹 서버가 소유권을 갖게 됩니다.

안전 모드는 심층 방어 전략으로는 고려해볼만하지만  안전 모드 자체로는 빈약한 보호 수단을 제공하기 때문에 8장에서 제사한 다른 보호 수단을 대체할 수는 없습니다. 