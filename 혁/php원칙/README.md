# 2. PHP 원칙

## 2.1. 심층 방어
심층 방어는 예비 낙하산이 필요한 스카이 다이버가 여분의 보호 수단이 갖는 가치를 증명합니다. 주 보호 수단이 실패한다면 여분의 보호 수단이 있어야 합니다. 이처럼 프로그래밍 심층 방어 또한 마찬가지로 사용자가 중요한 일을 하려고 한다면 다시 인증하도록 하는 방법은 좋은 지침 중 하나입니다. 이 외에도 여러 로직에서 재확인은 필수입니다. 

## 2.2. 최소 권한
평소 주차 요원에게 키를 맡길 때의 예를 들 때 주차 서비스를 위한 드라이브 키를 건네줍니다. 이유는 차의 다른 기능을 수행하지 않고, 오로지 주차에 필요한 드라이브 기능만을 주기 위해서입니다. 만약 그 외 기능이 있는 키였다면 복제하여 무작위로 사용할 수 있는 위험 요소가 존재하기 때문입니다. 프로그램도 마찬가지로 이용자의 권한을 고려하고 검토해야합니다. 최소한의 권한이 곧 안전한 프로그램 개발의 핵심 요소 입니다. 공격자가 어떻게 공격할지는 모르기 때문에 권한이 남용 될 모든 경우는 생각할 수 없지만 최소한의 권한만 제공한다면 이 또한 보안 증대에 기여할 수 있습니다.

## 2.3. 단순한 코드가 더 좋은 경우
복잡한 코드에서 실수가 나기 마련이고, 그 코드안에 보안 취약점이 존재할 수 있습니다.
```
<?php
    $search = (isset($_GET['search']) ? $_GET['search] : '');
?>
```
 위와 같은 코드는 $search 변수가 조작되었다는 사실을 감출수도 있으며 그냥 지나치기 쉽습니다.
 ```
<?php
    $search = '';
    if(isset($_GET['search'])){
        $search = isset($_GET['search']);
    }
?>
 ```
  분명 동일하게 느낄 수도 있지만 if문을 통해 위의 코드보다 $search 변수의 변경을 좀 더 분명하게 알 수 있습니다.

  ## 2.4. 정보 노출의 최소화
  인터넷은 공개 네트워크이기 때문에 인터넷으로 데이터가 노출된다는 것을 항상 방심해서는 안됩니다. 예시로 사용자가 결제 정보를 입력한다면 클라이언트와 서버 사이를 오가는 신용카드 정보를 보호하기 위해 SSL을 사용해야 하고, 만약 주문 확인 페이지에 신용 카드 번호를 보여주려고 한다면 이는 신용카드 정보를 다시 클라이언트에게 보내는 것이므로 SSL을 사용해서 이 페이지를 보호해야 합니다. 하지만 SSL로도 신뢰성 100%를 보장할 수 없기에 민감한 데이터 노출을 최소화하는 여러 기법들을 익혀야 합니다. (기법들은 뒤에~)
